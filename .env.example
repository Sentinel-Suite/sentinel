# Sentinel Suite - Environment Configuration
# Copy this file to .env and adjust values as needed.
# All ports default to the 3500 range to avoid conflicts.

# ──────────────────────────────────────────────
# Application
# ──────────────────────────────────────────────
NODE_ENV=development                     # development | production | test
LOG_LEVEL=debug                          # trace | debug | info | warn | error | fatal
NEXT_PUBLIC_API_URL=http://localhost:3500 # API URL for frontend apps (web + admin)

# ──────────────────────────────────────────────
# App Ports
# ──────────────────────────────────────────────
API_PORT=3500                            # NestJS API server
WEB_PORT=3501                            # Next.js web app
ADMIN_PORT=3502                          # Next.js admin app
WORKER_PORT=3503                         # BullMQ worker
DOCS_PORT=3504                           # Nextra docs site

# ──────────────────────────────────────────────
# Database (PostgreSQL)
# ──────────────────────────────────────────────
CONTROL_DATABASE_URL=postgres://sentinel:sentinel@localhost:3510/sentinel_control
POSTGRES_USER=sentinel                   # Docker Postgres superuser
POSTGRES_PASSWORD=sentinel               # Docker Postgres password
POSTGRES_DB=sentinel_control             # Default database (init script creates glitchtip + flagsmith)
POSTGRES_PORT=3510                       # Host port mapped to Postgres 5432

# ──────────────────────────────────────────────
# Cache (Redis)
# ──────────────────────────────────────────────
REDIS_URL=redis://localhost:3511         # Redis connection URL for application
REDIS_PORT=3511                          # Host port mapped to Redis 6379

# ──────────────────────────────────────────────
# Observability (full profile)
# ──────────────────────────────────────────────
GRAFANA_PORT=3530                        # Grafana dashboards (auto-provisions Loki, Prometheus, Jaeger)
LOKI_PORT=3531                           # Loki log aggregation
PROMETHEUS_PORT=3532                     # Prometheus metrics scraping
JAEGER_UI_PORT=3533                      # Jaeger distributed tracing UI
JAEGER_OTLP_PORT=4318                    # OpenTelemetry OTLP receiver (traces)
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318  # OpenTelemetry collector endpoint
LOKI_URL=http://localhost:3531           # Loki endpoint for pino-loki transport
METRICS_PORT=9464                        # Prometheus exporter port (NestJS metrics)

# ──────────────────────────────────────────────
# Error Tracking (full profile)
# ──────────────────────────────────────────────
GLITCHTIP_PORT=3540                      # GlitchTip error tracking (Sentry-compatible)
GLITCHTIP_SECRET_KEY=change-me-in-production  # GlitchTip Django secret key
SENTRY_DSN=                              # GlitchTip/Sentry DSN (set after GlitchTip setup)

# ──────────────────────────────────────────────
# Feature Flags (full profile)
# ──────────────────────────────────────────────
FLAGSMITH_PORT=3541                      # Flagsmith feature flags UI + API
FLAGSMITH_SERVER_SIDE_KEY=               # Flagsmith server-side environment key

# ──────────────────────────────────────────────
# Email (full profile)
# ──────────────────────────────────────────────
MAILPIT_SMTP_PORT=3525                   # Mailpit SMTP server (send test emails here)
MAILPIT_UI_PORT=3526                     # Mailpit web UI (view caught emails)

# ──────────────────────────────────────────────
# Admin Tools (full profile)
# ──────────────────────────────────────────────
PGADMIN_PORT=3550                        # pgAdmin web UI
PGADMIN_EMAIL=admin@sentinel.local       # pgAdmin login email
PGADMIN_PASSWORD=admin                   # pgAdmin login password
TRAEFIK_DASHBOARD_PORT=3580              # Traefik reverse proxy dashboard
